<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8">
Â  <title>Results | CTMatch</title>
Â  <style>
Â  Â  body {
Â  Â  Â  font-family: Arial, sans-serif;
Â  Â  Â  background: #f3f4f6;
Â  Â  Â  padding: 20px;
Â  Â  }
Â  Â  .container {
Â  Â  Â  background: white;
Â  Â  Â  padding: 2rem;
Â  Â  Â  border-radius: 10px;
Â  Â  Â  max-width: 900px;
Â  Â  Â  margin: auto;
Â  Â  Â  box-shadow: 0 0 10px rgba(0,0,0,0.1);
Â  Â  }
Â  Â  h2, h3 {
Â  Â  Â  color: #333;
Â  Â  }
Â  Â  .section {
Â  Â  Â  margin-bottom: 2rem;
Â  Â  }
Â  Â  pre {
Â  Â  Â  background: #e5e7eb;
Â  Â  Â  padding: 1rem;
Â  Â  Â  border-radius: 5px;
Â  Â  Â  overflow-x: auto;
Â  Â  }
Â  Â  table {
Â  Â  Â  width: 100%;
Â  Â  Â  border-collapse: collapse;
Â  Â  Â  margin-top: 1rem;
Â  Â  }
Â  Â  th, td {
Â  Â  Â  border: 1px solid #ddd;
Â  Â  Â  padding: 0.75rem;
Â  Â  Â  text-align: left;
Â  Â  }
Â  Â  th {
Â  Â  Â  background-color: #3b82f6;
Â  Â  Â  color: white;
Â  Â  }
Â  Â  .download-btn {
Â  Â  Â  margin-top: 1rem;
Â  Â  Â  display: inline-block;
Â  Â  Â  padding: 0.5rem 1rem;
Â  Â  Â  background-color: #10b981;
Â  Â  Â  color: white;
Â  Â  Â  text-decoration: none;
Â  Â  Â  border-radius: 5px;
Â  Â  }
Â  Â  .back-btn {
Â  Â  Â  margin-top: 1rem;
Â  Â  Â  display: inline-block;
Â  Â  Â  padding: 0.5rem 1rem;
Â  Â  Â  background-color: #ef4444;
Â  Â  Â  color: white;
Â  Â  Â  text-decoration: none;
Â  Â  Â  border-radius: 5px;
Â  Â  }
Â  </style>
</head>
<body>
Â  <div class="container">
Â  Â  <h2>Classification Results</h2>

Â  Â  <div class="section">
Â  Â  Â  <h3>Patient Input:</h3>
Â  Â  Â  <pre>{{ patient_input }}</pre>
Â  Â  </div>

Â  Â  <div class="section">
Â  Â  Â  <h3>Predicted Labels:</h3>
Â  Â  Â  {% if predicted_labels %}
Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  {% for label in predicted_labels %}
Â  Â  Â  Â  Â  Â  <li>{{ label }}</li>
Â  Â  Â  Â  Â  {% endfor %}
Â  Â  Â  Â  </ul>
Â  Â  Â  {% else %}
Â  Â  Â  Â  <p>No predicted labels found.</p>
Â  Â  Â  {% endif %}
Â  Â  </div>

Â  Â  <div class="section">
Â  Â  Â  <h3>Eligible Clinical Trials:</h3>
Â  Â  Â  {% if matching_trials %} Â  Â  Â  Â  <table>
Â  Â  Â  Â  Â  <thead>
Â  Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  Â  <th>Trial ID</th>
Â  Â  Â  Â  Â  Â  Â  <th>Description</th>
Â  Â  Â  Â  Â  Â  Â  <th>Labels</th>
Â  Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  </thead>
Â  Â  Â  Â  Â  <tbody>
Â  Â  Â  Â  Â  Â  {% for trial in matching_trials %} Â  Â  Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  Â  Â  <td>{{ trial.trial_id }}</td>
Â  Â  Â  Â  Â  Â  Â  Â  <td>{{ trial.doc|truncatechars:300 }}</td>
Â  Â  Â  Â  Â  Â  Â  Â  <td>{{ trial.parsed_labels|join:", " }}</td> Â  Â  Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  Â  {% endfor %}
Â  Â  Â  Â  Â  </tbody>
Â  Â  Â  Â  </table>
Â  Â  Â  Â  <a class="download-btn" href="{% url 'download_results' %}">Download as CSV</a>
Â  Â  Â  {% else %}
Â  Â  Â  Â  <p>No matching trials found.</p>
Â  Â  Â  {% endif %}
Â  Â  </div>

Â  Â  <a class="back-btn" href="{% url 'home' %}">ðŸ”™ Back to Home</a>
Â  </div>
</body>
</html>